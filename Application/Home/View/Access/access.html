<taglib name="html" />
<include file="Public/header" />
<link href="__ROOT__/Public/assets/global/plugins/jstree/dist/themes/default/style.min.css" rel="stylesheet" type="text/css" />
<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white">
<div class="page-wrapper">
    <!-- BEGIN HEADER -->
    <include file="Public/top" />
    <!-- END HEADER -->
    <!-- BEGIN HEADER & CONTENT DIVIDER -->
    <div class="clearfix"> </div>
    <!-- END HEADER & CONTENT DIVIDER -->
    <!-- BEGIN CONTAINER -->
    <div class="page-container">
        <!-- BEGIN SIDEBAR -->
        <!--  left_comm-->
        <include file="Public/left_comm" />
        <!-- END SIDEBAR -->
        <!-- BEGIN CONTENT -->
        <div class="page-content-wrapper">
            <!-- BEGIN CONTENT BODY -->
            <div class="page-content">
                <div class="page-bar">
                    <ul class="page-breadcrumb">
                        <li>
                            <a href="{$home}">首页</a>
                            <i class="fa fa-circle"></i>
                        </li>
                        <li>
                            <a href='{:U("Access/index")}'>用户管理</a>
                            <i class="fa fa-circle"></i>
                        </li>
                        <li>
                            <a href="###">权限配置</a>

                        </li>

                    </ul>

                </div>


                <h1 class="page-title" >权限配置
                    <small>




                    </small>
                </h1>

                <div class="clearfix"></div>
                <!-- table  -->



                <form action="" method="post" id="form1" name="form1">

                    <div id="configTree" ></div>
                    <br>
                    <div>
                        渠道
                        <select name="qudao[]" size="6" multiple="multiple">
                            <volist id="vo" name="qudao_list">
                            <option value="{$vo.title}" {$vo.s}>{$vo.title}</option>
                            </volist>
                        </select>
                        店铺
                        <select name="dianpu[]" size="6" multiple="multiple">
                            <volist id="vo" name="dianpu_list">
                                <option value="{$vo.title}" {$vo.s}>{$vo.title}</option>
                            </volist>
                        </select>
                        仓位
                        <select name="cangwei[]" size="6" multiple="multiple">
                            <volist id="vo" name="warehouse_list">
                                <option value="{$vo.id}" {$vo.s}>{$vo.name}</option>
                            </volist>
                        </select>
                    </div>
                    <br>
                    <input type="button" name="Submit" value="提交" class="btn green" onclick="getMenuIds()"/>
                    <input type="hidden" name="id" value="{$id}">
                    <input type="hidden" name="ids" value="" id="ids">
                    <input type="hidden" name="act" value="edit">
                    <div id="test"></div>
                </form>


                <!-- table end -->





            </div>
            <!-- END CONTENT BODY -->
        </div>
        <!-- END CONTENT -->
        <!-- BEGIN QUICK SIDEBAR -->
        <a href="javascript:;" class="page-quick-sidebar-toggler">
            <i class="icon-login"></i>
        </a>

        <!-- END QUICK SIDEBAR -->
    </div>
    <!-- END CONTAINER -->
    <!-- BEGIN FOOTER -->
    <include file="Public/footer" />
    <!-- END FOOTER -->
</div>
<!--[if lt IE 9]>
<script src="__ROOT__/Public/assets/global/plugins/respond.min.js"></script>
<script src="__ROOT__/Public/assets/global/plugins/excanvas.min.js"></script>
<script src="__ROOT__/Public/assets/global/plugins/ie8.fix.min.js"></script>
<![endif]-->
<!-- BEGIN CORE PLUGINS -->
<script src="__ROOT__/Public/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="__ROOT__/Public/assets/global/scripts/datatable.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/global/plugins/flot/jquery.flot.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/global/plugins/flot/jquery.flot.resize.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/global/plugins/flot/jquery.flot.pie.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/global/plugins/jstree/dist/jstree.min.js" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN THEME GLOBAL SCRIPTS -->
<script src="__ROOT__/Public/assets/global/scripts/app.min.js" type="text/javascript"></script>
<!-- END THEME GLOBAL SCRIPTS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="__ROOT__/Public/js/CheckboxTree.js" type="text/javascript"></script>

<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN THEME LAYOUT SCRIPTS -->
<script src="__ROOT__/Public/assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/layouts/layout/scripts/demo.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/layouts/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/assets/layouts/global/scripts/quick-nav.min.js" type="text/javascript"></script>
<!-- END THEME LAYOUT SCRIPTS -->

<script language="javascript">
    jQuery(document).ready(function()
    {
        var treeid = "configTree";
        var menuid=[{$ids}];
        showCheckboxTree("{:U('Access/get_tree_menu')}",treeid,menuid);
    });
    function getMenuIds()
    {

        //取得所有选中的节点，返回节点对象的集合
        var ids="";
        var nodes=$("#configTree").jstree().get_checked(); //使用get_checked方法
        //var nodes2=$("#configTree").jstree("get_all_checked"); //使用get_checked方法
        $('#ids').val(nodes);
        $("#form1").submit();

        //alert(nodes);
        //alert(JSON.stringify(nodes));

        //document.write(JSON.stringify(nodes));
    }


</script>
</body>
</html>
